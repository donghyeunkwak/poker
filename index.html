<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>í¬ì»¤ ë©”ëª¨ì¥</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { height: 100%; font-family: sans-serif; background: #121212; color: white; }

    #onboarding {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: black;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2rem;
      z-index: 9999;
    }

    #mainApp {
      display: none;
      padding-bottom: 70px;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      background: #1f1f1f;
      font-size: 1rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .topbar button {
      font-size: 1.4rem;
      background: none;
      color: white;
      border: none;
      cursor: pointer;
    }

    .entry {
      background: #1e1e1e;
      padding: 10px;
      margin: 10px 16px;
      border-radius: 8px;
      border: 1px solid #333;
      white-space: pre-line;
    }

    #memoList {
      padding-bottom: 30px;
    }

    #emptyMessage {
      text-align: center;
      color: #777;
      margin-top: 30px;
      font-size: 1.1rem;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: #1f1f1f;
      border-top: 1px solid #333;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    .add-button {
      background: #0077ff;
      color: white;
      font-size: 2rem;
      padding: 0.3em 0.75em;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    #memoInputArea {
      display: none;
      padding: 16px;
    }

    .form-section {
      margin-bottom: 16px;
      display: flex;
      flex-direction: column;
    }

    .form-section label {
      margin-bottom: 6px;
      font-weight: bold;
      font-size: 0.95rem;
    }

    select, input, textarea {
      padding: 10px;
      border: 1px solid #444;
      border-radius: 8px;
      font-size: 1rem;
      background: #1e1e1e;
      color: white;
    }

    #saveBtn {
      margin-top: 8px;
      padding: 10px;
      font-size: 1rem;
      width: 100%;
      background: #00aaff;
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- ì˜¨ë³´ë”© -->
  <div id="onboarding">ğŸƒ í¬ì»¤ ë©”ëª¨ì¥</div>

  <!-- ë©”ì¸ ì•± -->
  <div id="mainApp">
    <div class="topbar">
      <span>í¬ì»¤ ë©”ëª¨ì¥</span>
      <button onclick="toggleFullScreen()">â›¶</button>
    </div>

<!-- ì…ë ¥ í¼ -->
<<div id="memoInputArea">
    <!-- 1~9 ê¸°ë³¸ ê²Œì„ ì •ë³´ -->
    <div class="form-section"><label>TYPE</label>
      <select id="type"><option>Cash Game</option><option>Tournament</option></select>
    </div>
    <div class="form-section"><label>TABLE SIZE</label>
      <select id="tableSize"><option>Full-Ring</option><option>6-Max</option><option>Heads-Up</option></select>
    </div>
    <div class="form-section"><label>START</label>
      <input type="datetime-local" id="startTime">
    </div>
    <div class="form-section"><label>END</label>
      <input type="datetime-local" id="endTime">
    </div>
    <div class="form-section"><label>LOCATION</label>
      <input type="text" id="location" placeholder="Ex: Walkerhill">
    </div>
    <div class="form-section"><label>ROOM</label>
      <select id="room"><option>Home Game</option><option>Casino</option><option>Online</option></select>
    </div>
    <div class="form-section"><label>CURRENCY</label>
      <select id="currency"><option>USD $</option><option>KRW â‚©</option><option>EUR â‚¬</option></select>
    </div>
    <div class="form-section"><label>GAME</label>
      <input type="text" id="gameType" placeholder="Ex: NLH, PLO">
    </div>
    <div class="form-section"><label>LIMIT</label>
      <select id="limit"><option>No Limit</option><option>Pot Limit</option><option>Fixed Limit</option></select>
    </div>
  
    <!-- 10~13 ë¸”ë¼ì¸ë“œ êµ¬ì¡° -->
    <div class="form-section"><label>SMALL BLIND</label>
      <input type="number" id="smallBlind" placeholder="ì˜ˆ: 1">
    </div>
    <div class="form-section"><label>BIG BLIND</label>
      <input type="number" id="bigBlind" placeholder="ì˜ˆ: 2">
    </div>
    <div class="form-section"><label>3RD BLIND</label>
      <input type="number" id="thirdBlind" placeholder="ì„ íƒì‚¬í•­">
    </div>
    <div class="form-section"><label>ANTE</label>
      <input type="number" id="ante" placeholder="ì„ íƒì‚¬í•­">
    </div>
  
    <!-- 14~19 ê¸ˆì „ ê´€ë ¨ -->
    <div class="form-section"><label>BUY-IN</label>
      <input type="number" id="buyIn" placeholder="ì˜ˆ: 100">
    </div>
    <div class="form-section"><label>CASH-OUT</label>
      <input type="number" id="cashOut" placeholder="ì˜ˆ: 250">
    </div>
    <div class="form-section"><label>NUMBER OF REBUYS</label>
      <input type="number" id="rebuys">
    </div>
    <div class="form-section"><label>REBUY TOTAL COSTS</label>
      <input type="number" id="rebuyCost">
    </div>
    <div class="form-section"><label>EXPENSES</label>
      <input type="number" id="expenses" placeholder="ì˜ˆ: 20">
    </div>
    <div class="form-section"><label>EXPENSES IN CHIPS (TIP)</label>
      <input type="number" id="chipExpenses">
    </div>
  
    <!-- 20~22 ê¸°íƒ€ -->
    <div class="form-section"><label>BREAKS IN MINUTES</label>
      <input type="number" id="breaks">
    </div>
    <div class="form-section"><label>HANDS PER HOUR</label>
      <input type="number" id="handsPerHour">
    </div>
    <div class="form-section"><label>STAKING</label>
      <select id="staking">
        <option>No shares bought/sold</option>
        <option>Shares sold</option>
        <option>Shares bought</option>
      </select>
    </div>
  
    <!-- ë©”ëª¨ + íƒœê·¸ -->
    <div class="form-section"><label>SESSION NOTE</label>
      <textarea id="memoNote" rows="4" placeholder="ê¸°ì–µí•˜ê³  ì‹¶ì€ í•¸ë“œ/ìƒí™© ë©”ëª¨..."></textarea>
    </div>
    <div class="form-section"><label>TAGS</label>
      <input type="text" id="tags" placeholder="ì˜ˆ: longsession, tilt, finaltable">
    </div>
  
    <!-- ì €ì¥ ë²„íŠ¼ -->
    <button id="saveBtn" onclick="saveMemo()">âœ“ SAVE</button>
  </div>
  

    <!-- ë©”ëª¨ ë¦¬ìŠ¤íŠ¸ -->
    <div id="memoList">
      <div id="emptyMessage">ë©”ëª¨ê°€ ì—†ì–´ìš” ğŸ¥²</div>
    </div>
  </div>

  <!-- í•˜ë‹¨ ë„¤ë¹„ -->
  <div class="bottom-nav">
    <button class="add-button" onclick="toggleMemoInput()">+</button>
  </div>

  <!-- ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
<div id="detailModal" style="
display: none;
position: fixed;
top: 0; left: 0;
width: 100%; height: 100%;
background: rgba(0,0,0,0.8);
color: white;
padding: 40px 20px;
z-index: 9999;
overflow-y: auto;
">
<div style="max-width: 600px; margin: auto; background: #1e1e1e; padding: 20px; border-radius: 10px;">
  <h2>ğŸ“ ì„¸ì…˜ ìƒì„¸ ì •ë³´</h2>
  <pre id="modalContent" style="white-space: pre-wrap; font-size: 0.95rem; margin-top: 10px;"></pre>
  <!-- ê°ì • ì•„ì´ì½˜ ë²„íŠ¼ -->
<!-- í˜„ì¬ ê°ì • ì´ëª¨ì§€ -->
<div style="position: relative; margin-top: 20px; text-align: right;">
  <div id="emojiDisplay" 
     style="
       font-size: 6rem;         /* ğŸ‘ˆ ì—„ì²­ í¼ */
       cursor: pointer;
       position: fixed;
       bottom: 40px;
       right: 20px;
       z-index: 99999;
     "
     onmousedown="startHoldEmoji()" 
     onmouseup="cancelHoldEmoji()" 
     ontouchstart="startHoldEmoji()" 
     ontouchend="cancelHoldEmoji()">
  ğŸ§
</div>

  <!-- ê°ì • ì„ íƒ íŒì—… -->
  <div id="emojiPicker" style="
    display: none;
    position: absolute;
    bottom: 50px;
    right: 0;
    background: #1e1e1e;
    padding: 8px 12px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
  ">
    <span onclick="selectEmoji('ğŸ˜¡')">ğŸ˜¡</span>
    <span onclick="selectEmoji('ğŸ˜')">ğŸ˜</span>
    <span onclick="selectEmoji('ğŸ¥¶')">ğŸ¥¶</span>
    <span onclick="selectEmoji('ğŸ™')">ğŸ™</span>
    <span onclick="selectEmoji('ğŸ¤‘')">ğŸ¤‘</span>
  </div>
</div>


  <button onclick="closeModal()" style="margin-top: 20px; padding: 10px 20px; font-size: 1rem; background: #0077ff; color: white; border: none; border-radius: 6px;">ë‹«ê¸°</button>
</div>
</div>


<script>
  // ì˜¨ë³´ë”© ì œê±°
  setTimeout(() => {
    document.getElementById('onboarding').style.display = 'none';
    document.getElementById('mainApp').style.display = 'block';
  }, 1500);

  // ì „ì²´í™”ë©´ ì „í™˜
  function toggleFullScreen() {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  }

  // ë©”ëª¨ ì…ë ¥ì°½ í† ê¸€
  function toggleMemoInput() {
    const area = document.getElementById('memoInputArea');
    area.style.display = area.style.display === 'block' ? 'none' : 'block';
  }

  // ë©”ëª¨ ì €ì¥
  function saveMemo() {
    const get = (id) => document.getElementById(id)?.value || '';

    const type = get('type');
    const tableSize = get('tableSize');
    const start = get('startTime');
    const end = get('endTime');
    const location = get('location');
    const room = get('room');
    const currency = get('currency');
    const gameType = get('gameType');
    const limit = get('limit');
    const smallBlind = get('smallBlind');
    const bigBlind = get('bigBlind');
    const thirdBlind = get('thirdBlind');
    const ante = get('ante');
    const buyIn = get('buyIn');
    const cashOut = get('cashOut');
    const rebuys = get('rebuys');
    const rebuyCost = get('rebuyCost');
    const expenses = get('expenses');
    const chipExpenses = get('chipExpenses');
    const breaks = get('breaks');
    const handsPerHour = get('handsPerHour');
    const staking = get('staking');
    const note = get('memoNote');
    const tags = get('tags');

    if (!note || !buyIn) {
      alert("BUY-INê³¼ NOTEëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤!");
      return;
    }

    const now = new Date();
    const formatted = `${now.getFullYear()}.${(now.getMonth()+1).toString().padStart(2,'0')}.${now.getDate().toString().padStart(2,'0')} ${now.toLocaleTimeString()}`;

    const list = document.getElementById('memoList');
    const empty = document.getElementById('emptyMessage');

    const div = document.createElement('div');
    div.className = 'entry';
    div.innerText = `ğŸ“Œ [${formatted}] â€“ ${type}`;

    const fullDetail = `
ğŸ“Œ [${formatted}]
ğŸ® TYPE: ${type} | ğŸª‘ TABLE: ${tableSize}
ğŸ ${start} ~ ${end}
ğŸ“ LOCATION: ${location} | ğŸ  ROOM: ${room}
ğŸ’² CURRENCY: ${currency} | GAME: ${gameType} (${limit})
ğŸ’¸ BLINDS: ${smallBlind}/${bigBlind}${thirdBlind ? '/' + thirdBlind : ''} ANTE: ${ante}
ğŸ’° BUY-IN: $${buyIn} | CASH-OUT: $${cashOut}
â™»ï¸ REBUYS: ${rebuys} (TOTAL: $${rebuyCost})
ğŸ§¾ EXPENSES: $${expenses} | TIP: $${chipExpenses}
â±ï¸ BREAKS: ${breaks}m | HPH: ${handsPerHour}
ğŸ¤ STAKING: ${staking}
ğŸ“ NOTE: ${note}
ğŸ·ï¸ TAGS: ${tags}`.trim();

    div.dataset.detail = fullDetail;
    div.onclick = () => openModal(fullDetail);

    addDeleteHandler(div);
    list.prepend(div);

    if (empty) empty.remove();
    toggleMemoInput();
  }

  // ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°
  function openModal(content) {
    document.getElementById('modalContent').innerText = content;
    document.getElementById('detailModal').style.display = 'block';
  }

  function selectEmoji(emoji) {
  alert(`ì˜¤ëŠ˜ì˜ ê°ì • ì„ íƒ: ${emoji}`);
  // ì¶”í›„: localStorageì— ì €ì¥ or noteì— ì¶”ê°€ ê°€ëŠ¥
}
  // ìƒì„¸ ëª¨ë‹¬ ë‹«ê¸°
  function closeModal() {
    document.getElementById('detailModal').style.display = 'none';
  }

  // ì‚­ì œ ê¸°ëŠ¥ (ìš°í´ë¦­ / ê¾¹ëˆ„ë¥´ê¸°)
  function addDeleteHandler(entry) {
    entry.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      if (document.fullscreenElement) {
        alert("ì „ì²´í™”ë©´ì—ì„  ì‚­ì œ ë¶ˆê°€. ì „ì²´í™”ë©´ì„ ì¢…ë£Œí•´ ì£¼ì„¸ìš”.");
        return;
      }
      if (confirm("ì‚­ì œí• ê¹Œìš”?")) {
        entry.remove();
        checkEmpty();
      }
    });

    let timer;
    entry.addEventListener('touchstart', () => {
      timer = setTimeout(() => {
        if (confirm("ì‚­ì œí• ê¹Œìš”?")) {
          entry.remove();
          checkEmpty();
        }
      }, 800);
    });
    entry.addEventListener('touchend', () => clearTimeout(timer));
  }

  // ë¦¬ìŠ¤íŠ¸ ë¹„ì—ˆì„ ë•Œ ë©”ì‹œì§€ í‘œì‹œ
  function checkEmpty() {
    const list = document.getElementById('memoList');
    if (list.querySelectorAll('.entry').length === 0) {
      const msg = document.createElement('div');
      msg.id = 'emptyMessage';
      msg.innerText = 'ë©”ëª¨ê°€ ì—†ì–´ìš” ğŸ¥²';
      msg.style.textAlign = 'center';
      msg.style.color = '#777';
      msg.style.marginTop = '30px';
      msg.style.fontSize = '1.1rem';
      list.appendChild(msg);
    }
  }

  let holdTimer;

// ê¾¹ ëˆ„ë¥´ê¸° ì‹œì‘
function startHoldEmoji() {
  holdTimer = setTimeout(() => {
    document.getElementById('emojiPicker').style.display = 'block';
  }, 600); // 0.6ì´ˆ ì´ìƒ ëˆŒëŸ¬ì•¼ ê°ì • ì„ íƒ íŒì—… ì—´ë¦¼
}

// ê¾¹ ëˆ„ë¥´ê¸° ì·¨ì†Œ
function cancelHoldEmoji() {
  clearTimeout(holdTimer);
}

// ê°ì • ì„ íƒ ì‹œ í‘œì‹œ
function selectEmoji(emoji) {
  document.getElementById('emojiDisplay').innerText = emoji;
  document.getElementById('emojiPicker').style.display = 'none';
}
</script>

  
  

</body>
</html>
